# Import
raworchids=read_excel("Data/Tabla_de_medidas.xlsx") %>% as_tibble()
library(here)
library(readxl)
library(tidyverse)
# Import
raworchids=read_excel("Data/Tabla_de_medidas.xlsx") %>% as_tibble()
print(raworchids,n=30)
# Data Cleaning
# Assign Values to Merged Data
orchids <-  mutate(raworchids,
es = if_else(!is.na(Especie),Especie,es)
)
# Data Cleaning
# Assign Values to Merged Data
orchids <-  mutate(raworchids,
es = if_else(!is.na(Especie),Especie,1)
)
orchids
orchids[1:100,4:8]
# Data Cleaning
# Assign Values to Merged Data
orchids <-  mutate(raworchids,
es = if_else(!is.na(Especie),Especie,es)
)
help("retain")
help("lag")
lag(1:5)
# Data Cleaning
# Assign Values to Merged Data
orchids <-  mutate(raworchids,
es = if_else(!is.na(Especie),Especie,lag(es))
)
# Import
raworchids=read_excel("Data/Tabla_de_medidas.xlsx",fillMergedCells = TRUE) %>% as_tibble()
help("read_excel")
help("fill")
# Data Cleaning
# Assign Values to Merged Data
orchids <-  raworchids %>% fill(Especie)
orchids
orchids[1:100]
orchids[1:100,]
print(orchids,100)
print(orchids,n=100)
help("read_excel")
# Data Cleaning
# Assign Values to Merged Data
orchids <-  raworchids %>% gsub(" ","_",colnames()) %>% fill(Especie, )
# Data Cleaning
# Assign Values to Merged Data
orchids <-  raworchids %>% gsub(" ","_",colnames()) %>% fill(Especie, )
# Data Cleaning
# Assign Values to Merged Data
orchids <-  raworchids %>% gsub(" ","_",colnames(raworchids)) %>% fill(Especie, )
# Data Cleaning
# Assign Values to Merged Data
orchids <- gsub(" ","_",colnames(raworchids))
orchids
# Data Cleaning
# Assign Values to Merged Data
orchids <- make.names(raworchids)
orchids
# Data Cleaning
# Assign Values to Merged Data
orchids <- make.names(raworchids) %>% as_tibble()
orchids
gsub(" ","_",colnames(raworchids))
raworchids
gsub(" ","_",colnames(raworchids))
raworchids
names(raworchids)<-gsub("\\s","_",names(raworchids))
raworchids
names(raworchids)<-gsub("\\s+|\\.","_",names(raworchids))
raworchids
# Data Cleaning
# Assign Values to Merged Data
names(raworchids) <- c("es","med","p","nr","r","lr","l")
raworchids
orchids <-  raworchids %>% fill(es,med,p,nr,l)
orchids
write.csv(orchids,"orchidsanalysisdata.csv")
# Assign Values to Merged Data
orchids <-  raworchids %>% fill(es,med,p,nr,l) %>% as.factor(es,med,l)
# Assign Values to Merged Data
orchids <-  raworchids %>% fill(es,med,p,nr,l) %>% as.factor(es)
# Assign Values to Merged Data
orchids <-  raworchids %>% fill(es,med,p,nr,l) %>% mutate(l=as.factor(l))
orchids
# Assign Values to Merged Data
orchids <-  raworchids %>% fill(es,med,p,nr,l) %>%
mutate(l=as.factor(l)) %>%
mutate(es=as.factor(es)) %>%
mutate(med=as.factor(med))
orchids
# Assign Values to Merged Data
orchids <-  raworchids %>% fill(es,med,p,nr,l) %>%
mutate(l=as.factor(l)) %>%
mutate(es=as.factor(es)) %>%
mutate(med=as.factor(med)) %>%
filter(p!="Ninguna plÃ¡ntula desarrollÃ³ raÃ­ces.")
filter(!(p%in% "Ninguna")
# Assign Values to Merged Data
orchids <-  raworchids %>% fill(es,med,p,nr,l) %>%
# Assign Values to Merged Data
orchids <-  raworchids %>% fill(es,med,p,nr,l) %>%
mutate(l=as.factor(l)) %>%
mutate(es=as.factor(es)) %>%
mutate(med=as.factor(med)) %>%
filter(!(p %in% "Ninguna"))
# Assign Values to Merged Data
orchids <-  raworchids %>% fill(es,med,p,nr,l) %>%
mutate(l=as.factor(l)) %>%
mutate(es=as.factor(es)) %>%
mutate(med=as.factor(med)) %>%
filter(!(p %in% "Ninguna"))
orchids
write.csv(orchids,"orchidsanalysisdata.csv")
write.csv(orchids,"orchidsanalysisdata.csv")
# Assign Values to Merged Data
orchids <-  raworchids %>% fill(es,med,p,nr,l) %>%
mutate(l=as.factor(l)) %>%
mutate(es=as.factor(es)) %>%
mutate(med=as.factor(med)) %>%
filter(p %in% "Ninguna")
orchids
# Assign Values to Merged Data
orchids <-  raworchids %>% fill(es,med,p,nr,l) %>%
mutate(l=as.factor(l)) %>%
mutate(es=as.factor(es)) %>%
mutate(med=as.factor(med)) %>%
filter(grepl(p,"Ningunga"))
# Assign Values to Merged Data
orchids <-  raworchids %>% fill(es,med,p,nr,l) %>%
mutate(l=as.factor(l)) %>%
mutate(es=as.factor(es)) %>%
mutate(med=as.factor(med)) %>%
filter(grepl("Ningunga",p))
orchids
grepl("Ningunga",orchids$p)
grepl("N",orchids$p)
test="Ninguna plÃ¡ntula desarrollÃ³ raÃ­ces."
grepl("Ninguna",test)
test=c("Ninguna plÃ¡ntula desarrollÃ³ raÃ­ces.",1:5)
grepl("Ninguna",test)
grepl("N",orchids$p)
orchids$p
# Assign Values to Merged Data
orchids <-  raworchids %>% fill(es,med,p,nr,l) %>%
mutate(l=as.factor(l)) %>%
mutate(es=as.factor(es)) %>%
mutate(med=as.factor(med)) %>%
grepl("N",orchids$p)
# Assign Values to Merged Data
orchids <-  raworchids %>% fill(es,med,p,nr,l) %>%
mutate(l=as.factor(l)) %>%
mutate(es=as.factor(es)) %>%
mutate(med=as.factor(med)) %>%
grepl("N",orchids$p)
# Assign Values to Merged Data
orchids <-  raworchids %>% fill(es,med,p,nr,l) %>%
mutate(l=as.factor(l)) %>%
mutate(es=as.factor(es)) %>%
mutate(med=as.factor(med))
orchids$p
grepl("N",orchids$p)
# Assign Values to Merged Data
orchids <-  raworchids %>% fill(es,med,p,nr,l) %>%
mutate(l=as.factor(l)) %>%
mutate(es=as.factor(es)) %>%
mutate(med=as.factor(med)) %>%
filter(grepl("N",orchids$p))
orchids$p
# Assign Values to Merged Data
orchids <-  raworchids %>% fill(es,med,p,nr,l) %>%
mutate(l=as.factor(l)) %>%
mutate(es=as.factor(es)) %>%
mutate(med=as.factor(med)) %>%
filter(!(grepl("N",orchids$p)))
orchids$p
test=c("Ninguna plÃ¡ntula desarrollÃ³ raÃ­ces.",1:5)
orchids
# Assign Values to Merged Data
orchids <-  raworchids %>% fill(es,med,p,nr,l) %>%
mutate(l=as.factor(l)) %>%
mutate(es=as.factor(es)) %>%
mutate(med=as.factor(med)) %>%
filter(!(grepl("N",orchids$p)))
help("drop")
orchids %>%   filter(!(grepl("N",orchids$p)))
# Assign Values to Merged Data
orchids <-  raworchids %>% fill(es,med,p,nr,l) %>%
mutate(l=as.factor(l)) %>%
mutate(es=as.factor(es)) %>%
mutate(med=as.factor(med))
#  filter((grepl("N",orchids$p)))
orchids %>%   filter(!(grepl("N",orchids$p)))
# Assign Values to Merged Data
orchids <-  raworchids %>% fill(es,med,p,nr,l) %>%
mutate(l=as.factor(l)) %>%
mutate(es=as.factor(es)) %>%
mutate(med=as.factor(med)) %>%
filter(!grepl("N",orchids$p)|is.na(p))
orchids
help("group_by
")
help("group_by")
# Average Root Numbers and Root Length
orchidsum <- orchids %>% group_by(p)
# Average Root Numbers and Root Length
orchidsum <- orchids %>% group_by(p)
help("summarize")
# Average Root Numbers and Root Length
orchidsum <- orchids %>% group_by(p) %>% summarise(rnum=mean(lr))
orchidsum
# Average Root Numbers and Root Length
orchidsum <- orchids %>% group_by(es,med,nr,l) %>% summarise(rnum=mean(lr))
orchidsum
# Average Root Numbers and Root Length
orchidsum <- orchids %>% group_by(p,es,med,nr,l) %>% summarise(rnum=mean(lr))
orchidsum
# Average Root Numbers and Root Length
orchidsum <- orchids %>% group_by(es,m,p) %>% summarise(rnum=mean(lr))
# Average Root Numbers and Root Length
orchidsum <- orchids %>% group_by(es,med,p) %>% summarise(rnum=mean(lr))
orchidsum
# Average Root Numbers and Root Length
orchidsum <- orchids %>% group_by(es,med,p) %>% summarise(rnum=mean(lr))
# Average Root Numbers and Root Length
test <- orchids %>% filter(r=="R1"|r=="0")
test
write_csv(test,"test.csv")
orchidsum <- orchids %>% group_by(es,medl,p) %>% summarise(rnum=mean(lr))
orchidsum <- orchids %>% group_by(es,med,l,p) %>% summarise(rnum=mean(lr))
orchidsum
write_csv(orchidsum,"possible.csv")
# Average Root Numbers and Root Length
orchidsum <-
orchids %>%
group_by(es, med, l, p) %>%
summarise(rnum = mean(lr),nr=last(nr))
orchidsum
7*(3*2*3)
7*(3*2*2)
write_csv(orchidsum,"orchid.csv")
mean(c(39.55,
20.68,
23.97,
18.66
))
mean(c(19.59,
17.11,
16.35
))
mean(c(28.56 ,
31.99,
50.35,
27.72
))
# Average Root Numbers and Root Length
orchidsum <-
orchids %>%
group_by(es, med, l, p) %>%
summarise(rnum = mean(lr),nr1=last(nr),nr2=count(r))
# Average Root Numbers and Root Length
orchidsum <-
orchids %>%
group_by(es, med, l, p) %>%
summarise(rnum = mean(lr),nr1=last(nr),nr2=n(r))
# Assign Values to Merged Data
orchids <-  raworchids %>% fill(es, med, p, nr, l) %>%
mutate(l = as.factor(l)) %>%
mutate(es = as.factor(es)) %>%
mutate(med = as.factor(med)) %>%
filter(!grepl("N", orchids$p) | is.na(p))
# Assign Values to Merged Data
orchids <-  raworchids %>% fill(es, med, p, nr, l) %>%
mutate(l = as.factor(l)) %>%
mutate(es = as.factor(es)) %>%
mutate(med = as.factor(med)) %>%
filter(!grepl("N", orchids$p) | is.na(p))
orchids
orchids$r
# Average Root Numbers and Root Length
orchidsum <-
orchids %>%
group_by(es, med, l, p) %>%
summarise(rnum = mean(lr),nr1=last(nr),nr2=n(r))
n(orchids$r)
n()
# Average Root Numbers and Root Length
orchidsum <-
orchids %>%
group_by(es, med, l, p) %>%
summarise(rnum = mean(lr),nr1=last(nr),nr2=n())
orchidsum
# Average Root Numbers and Root Length
is.null(filter(orchidsum,nr==0 and r !=0))
# Average Root Numbers and Root Length
is.null(filter(orchidsum,nr==0 & r !=0))
# Assign Values to Merged Data
orchids <-  raworchids %>% fill(es, med, p, nr, l) %>%
mutate(l = as.factor(l)) %>%
mutate(es = as.factor(es)) %>%
mutate(med = as.factor(med)) %>%
filter(!grepl("N", orchids$p) | is.na(p))
# Average Root Numbers and Root Length
orchids
is.null(filter(orchidsum,nr==0 & r !=0))
rlang::last_trace()
write_csv(orchidsum,"possible.csv")
write_csv(orchids,"possible.csv")
write_csv(orchids,"possible.csv")
filter(orchidsum,nr==0 & r !=0)
filter(orchidsum,nr==0)
# Average Root Numbers and Root Length
orchids
filter(orchidsum,nr==0.0)
filter(orchidsum,orchidsum$nr==0.0)
is.null(filter(orchids,nr==0 & r !=0))
filter(orchids,nr==0 & r !=0)
is.empty(filter(orchids,nr==0 & r !=0))
is_empty(filter(orchids,nr==0 & r !=0))
filter(orchids,nr==0 & r !=0)
ifelse(nrow((filter(orchids,nr==0 & r !=0)))==0, TRUE,FALSE)
orchidsum <-
orchids %>%
group_by(es, med, l, p) %>%
summarise(rnum = mean(lr),nr1=last(nr),nr2=n())
orchidsum
orchidsumt <-
orchids %>%
group_by(es, med, l, p) %>%
summarise(rnum = mean(lr),nr1=last(nr),nr2=n()) %>%
if_else(nr1==0,nr=1,ifelse(
nr1>=nr2,
nr=nr1,
nr=nr2
))
orchidsumt <-
orchids %>%
group_by(es, med, l, p) %>%
summarise(rnum = mean(lr),nr1=last(nr),nr2=n()) %>%
if_else(nr1==0,nr==1,ifelse(
nr1>=nr2,
nr==nr1,
nr==nr2
))
orchidsrn <-
orchidsum %>%
if_else(nr1==0,nr=0, if_else(
nr1>=nr2,
nr=nr1,
nr=nr2
))
orchidsrn <-
orchidsum %>%
if_else(nr1==0,nr=0,nr=1
))
orchidsrn <-
orchidsum %>%
if_else(nr1==0,nr=0,nr=1
)
rlang::last_trace()
help("new.column")
help("new_column")
help("??new_column")
orchidsrn <-
orchidsum %>% add_column(nr=0)
orchidsum
orchidsrn
orchidsrn <-
orchidsum %>% add_column(nr=0) %>%
if_else(nr1==0,nr=0,nr=1
)
orchidsrn <-
orchidsum %>% add_column(nr=0) %>%
if_else(nr1==0,nr=0,nr=1)
orchidsrn <-
orchidsum %>% add_column(nr=0) %>%
if (nr1==0) {
nr=0 } else {
if (nr1>=nr2) {
nr=nr1
} else {
nr=nr2
}
}
orchidsrn <-
orchidsum %>% add_column(nr=0) %>%
if (nr1==0) {
nr=0
} else {
if (nr1>=nr2) {
nr=nr1
} else {
nr=nr2
}
}
orchidsrn <-
orchidsum %>%
if (nr1==0) {
nr=0
} else {
if (nr1>=nr2) {
nr=nr1
} else {
nr=nr2
}
}
orchidsrn <-
orchidsrn <- orchidsum %>% mutate(
orchidsrn <- orchidsum %>% mutate(nr = ifelse(nr1 == 0, 0,
ifelse(nr1 >= nr2, nr1, nr2)))
orchidsrn
orchidsrn
orchidsrn <- orchidsum %>% mutate(nr = ifelse(nr1 == 0, 0,
ifelse(nr1 >= nr2, nr1, nr2)))
orchidsrn
install.packages("comparedf")
install.packages("compareDF")
library(compareDF)
compare_df(orchidsrn,orchidsum)
compare_df(orchidsrn,orchidsum)
orchidsum
# Get correct Root Number Values
orchidsrn <- orchidsum %>% mutate(nr = ifelse(nr1 == 0, 0,
ifelse(nr1 >= nr2, nr1, nr2)))
orchidsrn
orchidsum
orchidsrntest <- select(orchidsrn,-nr1)
orchidsrntest <- select(orchidsrn,-nr1) %>% rename(nr=nr1)
orchidsrntest <- select(orchidsrn,-nr1) %>% rename(nr1=nr)
compare_df(orchidsrntest,orchidsum)
help(repeat)
help("repeat")
help("rep")
# Create Dummy/Assumed Data for 11, 0.5
orchidsfinal <- orchidsrn %>% add_row(es=c(rep(11,7)))
# Get correct Root Number Values
orchidsrn <- orchidsum %>% mutate(nr = ifelse(nr1 == 0, 0,
ifelse(nr1 >= nr2, nr1, nr2))) %>%
ungroup()
# Create Dummy/Assumed Data for 11, 0.5
orchidsfinal <- orchidsrn %>% add_row(es=c(rep(11,7)))
# Create Dummy/Assumed Data for 11, 0.5
orchidsfinal <- orchidsrn %>% add_row(es=c(rep(as.factor(11),7)))
orchidsfinal
orchidsfinal[60:71,]
write.csv(orchidsfinal,"finaltest.csv")
# Create Dummy/Assumed Data for 11, 0.5
orchidsfinal <- orchidsrn %>% add_row(es=c(rep(as.factor(11),14)),
med=c(rep(as.factor(0.5),14))
)
# Create Dummy/Assumed Data for 11, 0.5
orchidsfinal <- orchidsrn %>% add_row(es=c(rep(as.factor(11),14)),
med=c(rep(as.factor(0.5),14))
)
write.csv(orchidsfinal,"finaltest.csv")
orchidsfinal <- orchidsrn %>% add_row(es=c(rep(as.factor(11),14)),
med=c(rep(as.factor(0.5),14)),
l=c(rep(as.factor("Oscuridad"),7),
rep(as.factor("Luz"),7))
)
write.csv(orchidsfinal,"finaltest.csv")
# Create Dummy/Assumed Data for 11, 0.5
orchidsfinal <- orchidsrn %>% select(-nr2,-nr1) %>%
add_row(es=c(rep(as.factor(11),14)),
med=c(rep(as.factor(0.5),14)),
l=c(rep(as.factor("Oscuridad"),7),
rep(as.factor("Luz"),7)),
p()
)
# Create Dummy/Assumed Data for 11, 0.5
orchidsfinal <- orchidsrn %>% select(-nr2,-nr1) %>%
add_row(es=c(rep(as.factor(11),14)),
med=c(rep(as.factor(0.5),14)),
l=c(rep(as.factor("Oscuridad"),7),
rep(as.factor("Luz"),7)),
p=c(1:14)
)
# Create Dummy/Assumed Data for 11, 0.5
orchidsfinal <- orchidsrn %>% select(-nr2,-nr1) %>%
add_row(es=c(rep(as.factor(11),14)),
med=c(rep(as.factor(0.5),14)),
l=c(rep(as.factor("Oscuridad"),7),
rep(as.factor("Luz"),7)),
p=c(as.character(1:14))
)
write.csv(orchidsfinal,"finaltest.csv")
orchidsfinal <- orchidsrn %>% select(-nr2,-nr1) %>%
add_row(es=c(rep(as.factor(11),14)),
med=c(rep(as.factor(0.5),14)),
l=c(rep(as.factor("Oscuridad"),7),
rep(as.factor("Luz"),7)),
p=c(as.character(1:14)),
rnum=0,
nr=0
)
write.csv(orchidsfinal,"finaltest.csv")
